<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>SanYuan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="SanYuan">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="SanYuan">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SanYuan">
  
    <link rel="alternate" href="/atom.xml" title="SanYuan" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">SanYuan</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-ubuntu-12-04网络设置" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/15/ubuntu-12-04网络设置/" class="article-date">
  <time datetime="2016-12-15T05:28:59.000Z" itemprop="datePublished">2016-12-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/15/ubuntu-12-04网络设置/">ubuntu 12.04网络设置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ubuntu 12.04网络设置，自定义IP地址<br>1、服务器版本<br>设置IP地址<br>ubuntu 12.04的网络设置文件是/etc/network/interfaces，打开文件，会看到</p>
<p>auto lo</p>
<p>iface lo inet loopback</p>
<p>这边的设置是本地回路。在后面加上</p>
<p>auto eth0</p>
<p>iface eth0 inet static</p>
<p>address 192.168.1.230（ip地址）</p>
<p>netmask 255.255.255.0（子网掩码）</p>
<p>gateway 192.168.1.1（网关）</p>
<p>其中eth0就是电脑的网卡，如果电脑有多块网卡，比如还会有eth1，都可以在这里进行设置。iface eth0 inet 设置为dhcp是动态获取IP，设置为static则用自定义的IP。这边要自定义IP地址，所以选择static选项。</p>
<p>重新启动网络服务<br>sudo /etc/init.d/networking restart</p>
<p>重启好后，用ifconfig看下eth0，是不是改成自己需要的IP地址了。</p>
<p>设置dns<br>ip设置好后，如果直接ping www.baidu.com会发现ping不通，因为dns还没设置，编辑/etc/resolv.conf，加上dns服务器地址。</p>
<p>nameserver 8.8.8.8</p>
<p>nameserver 8.8.4.4</p>
<p>这两个是Google提供的免费DNS服务器的IP地址。</p>
<p>2、桌面版本<br>桌面版提供了network-manage管理工具，可以通过界面直接管理。</p>
<p>点击右上角网络图标，编辑连接，增加新的连接。我的设置截图如下，可以根据自己的需要进行修改。</p>
<p>ubuntu 12.04桌面版网络设置-选择网卡<br>ubuntu 12.04桌面版网络设置-选择网卡</p>
<p>ubuntu 12.04桌面版网络设置-设置IP<br>ubuntu 12.04桌面版网络设置-设置IP</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/12/15/ubuntu-12-04网络设置/" data-id="ciwpxfwid002c4zcytx39fa31" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Ubuntu-用vsftpd-配置FTP服务器" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/15/Ubuntu-用vsftpd-配置FTP服务器/" class="article-date">
  <time datetime="2016-12-15T05:28:14.000Z" itemprop="datePublished">2016-12-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/15/Ubuntu-用vsftpd-配置FTP服务器/">Ubuntu 用vsftpd 配置FTP服务器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>网上的文章好难懂啊。。只想要简单粗暴，弄好能用就行啊，复杂的以后研究不行吗。。。折腾好久，其实弄出来能用不就这么点内容吗。。。<br>本文在Ubuntu Server 14.04 amd64系统测试。<br>Made By：CSGrandeur<br>安装ftp<br>sudo apt-get install vsftpd<br>配置vsftpd.conf<br>sudo nano /etc/vsftpd.conf<br>复制代码</p>
<p>#禁止匿名访问<br>anonymous_enable=NO</p>
<p>#接受本地用户<br>local_enable=YES</p>
<p>#允许上传<br>write_enable=YES</p>
<p>#用户只能访问限制的目录<br>chroot_local_user=YES</p>
<p>#设置固定目录，在结尾添加。如果不添加这一行，各用户对应自己的目录，当然这个文件夹自己建<br>local_root=/home/ftp<br>复制代码<br>看网上说加一行“pam_service_name=vsftpd”，我看我这个配置文件本来就有，就不管了。<br>添加ftp用户<br>sudo useradd -d /home/ftp -M ftpuser<br>sudo passwd ftpuser<br>调整文件夹权限<br>这个是避免“500 OOPS: vsftpd: refusing to run with writable root inside chroot()”<br>sudo chmod a-w /home/ftp<br>sudo mkdir /home/ftp/data<br>这样登录之后会看到data文件夹，虽然稍麻烦，原因不表了。。查资料这么辛酸已经不易。。<br>改pam.d/vsftpd<br>这时候直接用useradd的帐号登录ftp会530 login incorrect<br>sudo nano /etc/pam.d/vsftpd<br>注释掉 </p>
<p>#auth    required pam_shells.so<br>重启vsftpd<br>sudo service vsftpd restart<br>这时就可以用刚才建的ftpuser这个用户登录ftp了，看到的是local_root设置的/home/ftp，并且限制在该目录。</p>
<p>可以在浏览器用ftp://xxx.xxx.xxx.xxx访问，也可以用ftp软件比如flashFXP，密码就是ftpuser的密码。<br>关于用户访问文件夹限制<br>由chroot_local_user、chroot_list_enable、chroot_list_file这三个文件控制，转别人的一段话：<br>首先，chroot_list_enable好理解，就是：是否启用chroot_list_file配置的文件，如果为YES表示chroot_list_file配置的文件生效，否则不生效；<br>第二，chroot_list_file也简单，配置了一个文件路径，默认是/etc/vsftpd.chroot_list，该文件中会填入一些账户名称。但是这些账户的意义不是固定的，是跟配置项chroot_local_user有关的。后一条中说明；<br>第三，chroot_local_user为YES表示所有用户都<em>不能</em>切换到主目录之外其他目录，但是！除了chroot_list_file配置的文件列出的用户。chroot_local_user为NO表示所有用户都<em>能</em>切换到主目录之外其他目录，但是！除了chroot_list_file配置的文件列出的用户。也可以理解为，chroot_list_file列出的“例外情况”的用户。<br> 如果客户端登录时候提示“以pasv模式连接失败”<br>编辑/etc/vsftpd.conf<br>最后添加<br>pasv_promiscuous=YES<br>然后再重启vsftpd服务。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/12/15/Ubuntu-用vsftpd-配置FTP服务器/" data-id="ciwpxfwhs001t4zcyjm3jex13" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-ubuntu下允许root用户ssh远程登录" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/15/ubuntu下允许root用户ssh远程登录/" class="article-date">
  <time datetime="2016-12-15T05:27:18.000Z" itemprop="datePublished">2016-12-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/15/ubuntu下允许root用户ssh远程登录/">ubuntu下允许root用户ssh远程登录</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>SSH服务器，可以通过SSH协议来访问远程服务器，代替telnet和ftp。但是ubuntu默认是不启用root用户也不允许root远程登录的。所以需要先启用root用户</p>
<p>启用root用户：sudo passwd root      //修改密码后就启用了。</p>
<p>安装OpenSSH server：</p>
<ol>
<li>使用apt命令安装openssh server</li>
</ol>
<p>$ sudo apt-get install openssh-server</p>
<ol>
<li>可以对 openssh server进行配置</li>
</ol>
<p>$ sudo vi /etc/ssh/sshd_config</p>
<p>找到PermitRootLogin no一行，改为PermitRootLogin yes</p>
<ol>
<li>重启 openssh server</li>
</ol>
<p>$ sudo service ssh restart</p>
<ol>
<li>客户端如果是ubuntu的话，则已经安装好ssh client,可以用下面的命令连接远程服务器。</li>
</ol>
<p>$ ssh xxx.xxx.xxx.xxx</p>
<p>如果是windows系统的话，可以使用SSH Secure Shell等ssh软件进行远程连接。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/12/15/ubuntu下允许root用户ssh远程登录/" data-id="ciwpxfwid002d4zcyscsourel" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-ubuntu用root登录后没法使用chromium" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/15/ubuntu用root登录后没法使用chromium/" class="article-date">
  <time datetime="2016-12-15T05:26:45.000Z" itemprop="datePublished">2016-12-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/15/ubuntu用root登录后没法使用chromium/">ubuntu用root登录后没法使用chromium</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>用root登录后启动chromium会出现错误：<br>Google Chrome can not be run as root.<br>Please start Google Chrome as a normal user. To run as root, you must specify an alternate –user-data-dir for storage of profile information.<br>在网上有方法是用每次用终端启动时添加新的参数，但比较麻烦，后来研究了一下，只要新建一个chormium的桌面快捷方式，选择properties-》basic-&gt;command, 改为如下：<br>/usr/bin/chromium-browser %U - -user-data-dir=/root/.config/chromium<br>这样每次双击这个快捷方式，就能在root下使用chromium。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/12/15/ubuntu用root登录后没法使用chromium/" data-id="ciwpxfwie002e4zcyzfqi8d1p" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-vsftpd安装以及配置FTP虚拟用户实践" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/15/vsftpd安装以及配置FTP虚拟用户实践/" class="article-date">
  <time datetime="2016-12-15T05:26:06.000Z" itemprop="datePublished">2016-12-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/15/vsftpd安装以及配置FTP虚拟用户实践/">vsftpd安装以及配置FTP虚拟用户实践</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>vsftpd安装以及配置FTP虚拟用户实践<br>By wsgzao<br>发表于 2015-08-24<br>文章目录</p>
<ol>
<li><ol>
<li>前言</li>
</ol>
</li>
<li><ol>
<li>更新历史</li>
</ol>
</li>
<li><ol>
<li>安装vsftpd</li>
</ol>
</li>
<li><ol>
<li>基于虚拟用户的配置</li>
</ol>
</li>
<li>4.1. 修改配置文件</li>
<li>4.2. 进行认证</li>
<li>4.3. 设置FTP根目录权限</li>
<li>4.4. 配置PASV模式（可选）</li>
<li>4.5. Selinux和防火墙</li>
<li><ol>
<li>常见问题<br>前言<br>正如vsftpd官方宣传中所说Probably the most secure and fastest FTP server for UNIX-like systems.我相信这是大多数人选择vsftpd来搭建Linux的FTP服务器的原因，当然ProFTPD用的人应该也不在少数。文章将以清晰直观的方式介绍安装vsftpd以及配置FTP虚拟用户的过程，希望对大家有帮助。<br>首选的FTP服务器搭建方式</li>
</ol>
</li>
</ol>
<hr>
<p>更新历史<br>2015年08月24日 - 初稿<br>阅读原文 - <a href="http://wsgzao.github.io/post/vsftpd/" target="_blank" rel="external">http://wsgzao.github.io/post/vsftpd/</a><br>扩展阅读<br>CentOS 6.4 下安装vsftpd - <a href="http://www.cnblogs.com/xiongpq/p/3384759.html" target="_blank" rel="external">http://www.cnblogs.com/xiongpq/p/3384759.html</a><br>ProFTPD - <a href="http://www.proftpd.org/" target="_blank" rel="external">http://www.proftpd.org/</a><br>vsftpd - <a href="http://vsftpd.beasts.org" target="_blank" rel="external">http://vsftpd.beasts.org</a></p>
<hr>
<p>安装vsftpd</p>
<p>#查看当前系统版本<br>cat /etc/redhat-release<br>CentOS release 6.6 (Final)</p>
<p>#查看是否已经安装vsftpd<br>rpm -qa | grep vsftpd</p>
<p>#如果没有，就安装，并设置开机启动<br>yum -y install vsftpd<br>chkconfig vsftpd on<br>基于虚拟用户的配置<br>所谓虚拟用户就是没有使用真实的帐户，只是通过映射到真实帐户和设置权限的目的。虚拟用户不能登录CentOS系统。<br>修改配置文件<br>vi /etc/vsftpd/vsftpd.conf</p>
<p>#服务器独立运行<br>listen=YES</p>
<p>#设定不允许匿名访问<br>anonymous_enable=NO</p>
<p>#设定本地用户可以访问。注：如使用虚拟宿主用户，在该项目设定为NO的情况下所有虚拟用户将无法访问<br>local_enable=YES</p>
<p>#使用户不能离开主目录<br>chroot_list_enable=YES</p>
<p>#设定支持ASCII模式的上传和下载功能<br>ascii_upload_enable=YES<br>ascii_download_enable=YES</p>
<p>#PAM认证文件名。PAM将根据/etc/pam.d/vsftpd进行认证<br>pam_service_name=vsftpd</p>
<p>#设定启用虚拟用户功能<br>guest_enable=YES</p>
<p>#指定虚拟用户的宿主用户，CentOS中已经有内置的ftp用户了<br>guest_username=ftp</p>
<p>#设定虚拟用户个人vsftp的CentOS FTP服务文件存放路径。存放虚拟用户个性的CentOS FTP服务文件(配置文件名=虚拟用户名)<br>user_config_dir=/etc/vsftpd/vuser_conf</p>
<p>#配置vsftpd日志（可选）<br>xferlog_enable=YES<br>xferlog_std_format=YES<br>xferlog_file=/var/log/xferlog<br>dual_log_enable=YES<br>vsftpd_log_file=/var/log/vsftpd.log<br>进行认证</p>
<p>#安装Berkeley DB工具，很多人找不到db_load的问题就是没有安装这个包<br>yum install db4 db4-utils</p>
<p>#创建用户密码文本，注意奇行是用户名，偶行是密码<br>vi /etc/vsftpd/vuser_passwd.txt</p>
<p>test<br>123456</p>
<p>#生成虚拟用户认证的db文件<br>db_load -T -t hash -f /etc/vsftpd/vuser_passwd.txt /etc/vsftpd/vuser_passwd.db</p>
<p>#编辑认证文件，全部注释掉原来语句，再增加以下两句<br>vi /etc/pam.d/vsftpd</p>
<p>auth required pam_userdb.so db=/etc/vsftpd/vuser_passwd<br>account required pam_userdb.so db=/etc/vsftpd/vuser_passwd</p>
<p>#创建虚拟用户配置文件<br>mkdir /etc/vsftpd/vuser_conf/</p>
<p>#文件名等于vuser_passwd.txt里面的账户名，否则下面设置无效<br>vi /etc/vsftpd/vuser_conf/test</p>
<p>#虚拟用户根目录,根据实际情况修改<br>local_root=/data/ftp<br>write_enable=YES<br>anon_umask=022<br>anon_world_readable_only=NO<br>anon_upload_enable=YES<br>anon_mkdir_write_enable=YES<br>anon_other_write_enable=YES<br>设置FTP根目录权限</p>
<p>#最新的vsftpd要求对主目录不能有写的权限所以ftp为755，主目录下面的子目录再设置777权限<br>mkdir /data/ftp<br>chmod -R 755 /data<br>chmod -R 777 /data/ftp</p>
<p>#建立限制用户访问目录的空文件<br>touch /etc/vsftpd/chroot_list</p>
<p>#如果启用vsftpd日志需手动建立日志文件<br>touch /var/log/xferlog<br>touch /var/log/vsftpd.log<br>配置PASV模式（可选）<br>vsftpd默认没有开启PASV模式，现在FTP只能通过PORT模式连接，要开启PASV默认需要通过下面的配置</p>
<p>打开/etc/vsftpd/vsftpd.conf，在末尾添加</p>
<p>#开启PASV模式<br>pasv_enable=YES</p>
<p>#最小端口号<br>pasv_min_port=40000</p>
<p>#最大端口号<br>pasv_max_port=40080<br>pasv_promiscuous=YES</p>
<p>#在防火墙配置内开启40000到40080端口<br>-A INPUT -m state –state NEW -m tcp -p -dport 40000:40080 -j ACCEPT</p>
<p>#重启iptabls和vsftpd<br>service iptables restart<br>service vsftpd restart</p>
<p>现在可以使用PASV模式连接你的FTP服务器了~<br>Selinux和防火墙<br>该关闭的关闭，该放行的放行<br>service vsftpd start<br>常见问题<br>如果登录时出现<br>500 OOPS: priv_sock_get_result. Connection closed by remote host.<br>这样的错误，需要升级pam<br>yum update pam</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/12/15/vsftpd安装以及配置FTP虚拟用户实践/" data-id="ciwpxfwii002j4zcysy0y73aj" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Ubuntu-64-位预配" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/15/Ubuntu-64-位预配/" class="article-date">
  <time datetime="2016-12-15T05:22:07.000Z" itemprop="datePublished">2016-12-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/15/Ubuntu-64-位预配/">Ubuntu 64 位预配</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>java<br>vm tools<br>sudo passwd root<br>Ubuntu软件中心——编辑——更换软件源</p>
<p>root用户登录桌面<br>vim /usr/share/lightdm/lightdm.conf.d/50-ubuntu.conf<br>[SeatDefaults]<br>user-session=ubuntu<br>greeter-show-manual-login=true<br>Ubuntu启用root账户后，登录root账户时报错：读取/root/.profile时发现错误：mesg:ttyname failed:对设备不适当的ioctl操作 作为结果，会话不会被正确配置<br>root@ubuntu:~# cp /home/jinyan/.profile /root/<br>root@ubuntu:~# reboot</p>
<p>cp /etc/apt/sources.list /etc/apt/sources.listbak<br>vim /etc/apt/sources.list<br>  deb <a href="http://mirrors.aliyun.com/ubuntu/" target="_blank" rel="external">http://mirrors.aliyun.com/ubuntu/</a> precise main restricted universe multiverse<br>  deb <a href="http://mirrors.aliyun.com/ubuntu/" target="_blank" rel="external">http://mirrors.aliyun.com/ubuntu/</a> precise-security main restricted universe multiverse<br>  deb <a href="http://mirrors.aliyun.com/ubuntu/" target="_blank" rel="external">http://mirrors.aliyun.com/ubuntu/</a> precise-updates main restricted universe multiverse<br>  deb <a href="http://mirrors.aliyun.com/ubuntu/" target="_blank" rel="external">http://mirrors.aliyun.com/ubuntu/</a> precise-proposed main restricted universe multiverse<br>  deb <a href="http://mirrors.aliyun.com/ubuntu/" target="_blank" rel="external">http://mirrors.aliyun.com/ubuntu/</a> precise-backports main restricted universe multiverse<br>  deb-src <a href="http://mirrors.aliyun.com/ubuntu/" target="_blank" rel="external">http://mirrors.aliyun.com/ubuntu/</a> precise main restricted universe multiverse<br>  deb-src <a href="http://mirrors.aliyun.com/ubuntu/" target="_blank" rel="external">http://mirrors.aliyun.com/ubuntu/</a> precise-security main restricted universe multiverse<br>  deb-src <a href="http://mirrors.aliyun.com/ubuntu/" target="_blank" rel="external">http://mirrors.aliyun.com/ubuntu/</a> precise-updates main restricted universe multiverse<br>  deb-src <a href="http://mirrors.aliyun.com/ubuntu/" target="_blank" rel="external">http://mirrors.aliyun.com/ubuntu/</a> precise-proposed main restricted universe multiverse<br>  deb-src <a href="http://mirrors.aliyun.com/ubuntu/" target="_blank" rel="external">http://mirrors.aliyun.com/ubuntu/</a> precise-backports main restricted universe multiverse<br>apt-get update</p>
<p>用vim打开 /etc/default/locale 文件</p>
<p>原来的配置文件应该是这样的：<br>LANG=”zh_CN.UTF-8”<br>LANGUAGE=”zh_CN:zh:en_US:en”<br>LC_NUMERIC=”zh_CN.UTF-8”<br>LC_TIME=”zh_CN.UTF-8”<br>LC_MONETARY=”zh_CN.UTF-8”<br>LC_PAPER=”zh_CN.UTF-8”<br>LC_IDENTIFICATION=”zh_CN.UTF-8”<br>LC_NAME=”zh_CN.UTF-8”<br>LC_ADDRESS=”zh_CN.UTF-8”<br>LC_TELEPHONE=”zh_CN.UTF-8”<br>LC_MEASUREMENT=”zh_CN.UTF-8”</p>
<p>将原来的配置内容修改为<br>LANG=”en_US.UTF-8″<br>LANGUAGE=”en_US:en”</p>
<p>再在终端下运行：<br>locale-gen -en_US:en<br>注销或重启后，即可恢复为英文的语言环境。</p>
<p>查看防火墙状态<br>root@jinyan-virtual-machine:~# ufw status<br>状态：不活动<br>root@jinyan-virtual-machine:~# getenforce<br>程序“getenforce”尚未安装。 您可以使用以下命令安装：<br>apt-get install selinux-utils</p>
<p>apt-get install vim<br>apt-get install openssh-server<br>vim /etc/ssh/sshd_config<br>找到PermitRootLogin no一行，改为PermitRootLogin yes<br>PermitRootLogin yes</p>
<h1 id="PermitRootLogin-without-password"><a href="#PermitRootLogin-without-password" class="headerlink" title="PermitRootLogin without-password"></a>PermitRootLogin without-password</h1><p>重启系统<br>重启 openssh server<br>/etc/init.d/ssh restart<br>service ssh restart</p>
<p>apt-get install ntp<br>查看ntp同步过程<br>ntpq -p<br>ntpdate -u 202.120.2.101</p>
<p>apt-get install x-window-system-core<br>apt-get install gdm<br>apt-get install ubuntu-desktop<br>apt-get install gnome-core</p>
<p>apt-get install vnc4server<br>vncserver<br>cp ~/.vnc/xstartup  ~/.vnc/xstartup.bak<br>vim ~/.vnc/xstartup</p>
<h1 id="x-window-manager-amp"><a href="#x-window-manager-amp" class="headerlink" title="x-window-manager &amp;"></a>x-window-manager &amp;</h1><h1 id="gnome-session-amp"><a href="#gnome-session-amp" class="headerlink" title="gnome-session &amp;"></a>gnome-session &amp;</h1><p>gnome-panel &amp;<br>gnome-settings-daemon &amp;<br>metacity &amp;<br>nautilus &amp;<br>gnome-terminal &amp;</p>
<p>root@jinyan-virtual-machine:~# vncserver -kill :1<br>Killing Xvnc4 process ID 3767<br>root@jinyan-virtual-machine:~# vncserver :1<br>192.168.50.6:1</p>
<p>apt-get install vsftpd<br>apt-get remove vsftpd</p>
<p>vim /etc/vsftpd.conf<br>local_enable=YES<br>write_enable=YES<br>chroot_local_user=YES<br>chroot_list_enable=YES<br>chroot_list_file=/etc/vsftpd.chroot_list</p>
<p>anonymous_enable=YES</p>
<h1 id="anonymous-enable-NO"><a href="#anonymous-enable-NO" class="headerlink" title="anonymous_enable=NO"></a>anonymous_enable=NO</h1><p>useradd -d /home/ftp -M ftpuser<br>passwd ftpuser</p>
<p>vim /etc/vsftpd.chroot_list<br>ftpuser</p>
<p>vim /etc/ftpusers<br>打开这个文件后，看一看有没有uftp这个用户名，如果没有，就直接退出。如果有就删除uftp,因为这个文件中记录的是不能访问FTP服务器的用户清单。</p>
<p>vim /etc/pam.d/vsftpd</p>
<p>#auth   required        pam_shells.so</p>
<p>mkdir /home/ftp<br>chmod a-w /home/ftp<br>mkdir /home/ftp/data<br>chown -R ftpuser:ftpuser /home/ftp/</p>
<p>service vsftpd restart</p>
<p>mkdir /usr/lib/java<br>tar -zxvf jdk-7u79-linux-x64.tar.gz -C /usr/lib/java/<br>cd /usr/lib/java/jdk1.7.0_79/</p>
<p>vim ~/.bashrc</p>
<p>vim /etc/profile<br>export JAVA_HOME=/usr/lib/java/jdk1.7.0_79/<br>export JRE_HOME=${JAVA_HOME}/jre<br>export CLASS_PATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib<br>export PATH=${JAVA_HOME}/bin:$PATH</p>
<p>root@jinyan-virtual-machine:~# source /etc/profile<br>root@jinyan-virtual-machine:~# java -version<br>java version “1.7.0_79”<br>Java(TM) SE Runtime Environment (build 1.7.0_79-b15)</p>
<p>apt-get install samba<br>apt-get install smbfs</p>
<p>apt-get install samba samba-common system-config-samba python-glade2 gksu<br>在 Unity Dash 中搜索并打开 Samba 配置工具</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/12/15/Ubuntu-64-位预配/" data-id="ciwpxfwhr001s4zcywi9eyutb" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Postfix-Amavisd-new-Spamassassin-ClamAV整合安装" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/15/Postfix-Amavisd-new-Spamassassin-ClamAV整合安装/" class="article-date">
  <time datetime="2016-12-15T05:21:30.000Z" itemprop="datePublished">2016-12-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/15/Postfix-Amavisd-new-Spamassassin-ClamAV整合安装/">Postfix+Amavisd-new+Spamassassin+ClamAV整合安装</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li><p>安装软件和依赖包<br>apt-get install postfix amavisd-new spamassassin clamav-daemon mysql-client mysql-server<br>apt-get install libnet-dns-perl pyzor razor<br>apt-get install arj bzip2 cabextract cpio file gzip lha nomarch pax rar unrar unzip zip</p>
</li>
<li><p>修改用户权限<br>usermod -a -G clamav amavis<br>usermod -a -G amavis clamav</p>
</li>
<li><p>修改spamassassin配置文件/etc/default/spamassassin<br>ENABLED=0 ====&gt; ENABLED=1<br>CRON=0    ====&gt; CRON=1</p>
</li>
</ol>
<p>4.启动spamassassin<br>/etc/init.d/spamassassin start</p>
<ol>
<li><p>修改amavis配置文件/etc/amavis/conf.d/15-content_filter_mode<br> 1) 去掉里面的注释（目的：check病毒和垃圾邮件）<br> 2) 重启amavis<br>/etc/init.d/amavis restart</p>
</li>
<li><p>修改postfix配置文件/etc/postfix/main.cf,添加如下内容<br> 注释掉mydestination<br>添加：<br>relay_domains = test.com<br>transport_maps = hash:/etc/postfix/transport<br>relay_recipient_maps = hash:/etc/postfix/relay_recipients<br>content_filter = smtp-amavis:[127.0.0.1]:10024</p>
</li>
<li><p>编辑文件/etc/postfix/master.cf,在文件最后添加如下内容<br>smtp-amavis     unix    -       -       -       -       2       smtp</p>
<pre><code>-o smtp_data_done_timeout=1200
-o smtp_send_xforward_command=yes
-o disable_dns_lookups=yes
-o max_use=20
</code></pre></li>
</ol>
<p>127.0.0.1:10025 inet    n       -       -       -       -       smtpd<br>        -o content_filter=<br>        -o local_recipient_maps=<br>        -o relay_recipient_maps=<br>        -o smtpd_restriction_classes=<br>        -o smtpd_delay_reject=no<br>        -o smtpd_client_restrictions=permit_mynetworks,reject<br>        -o smtpd_helo_restrictions=<br>        -o smtpd_sender_restrictions=<br>        -o smtpd_recipient_restrictions=permit_mynetworks,reject<br>        -o smtpd_data_restrictions=reject_unauth_pipelining<br>        -o smtpd_end_of_data_restrictions=<br>        -o mynetworks=127.0.0.0/8<br>        -o smtpd_error_sleep_time=0<br>        -o smtpd_soft_error_limit=1001<br>        -o smtpd_hard_error_limit=1000<br>        -o smtpd_client_connection_count_limit=0<br>        -o smtpd_client_connection_rate_limit=0<br>        -o receive_override_options=no_header_body_checks,no_unknown_recipient_checks</p>
<ol>
<li><p>在文件/etc/postfix/master.cf中的pickup行添加如下内容<br>   -o content_filter=<br>   -o receive_override_options=no_header_body_checks</p>
</li>
<li><p>重启postfix<br>/etc/init.d/postfix reload</p>
</li>
<li><p>修改/etc/amavis/conf.d/20-debian_defaults<br>$final_spam_destiny = D_BOUNCE  ===&gt; $final_spam_destiny = D_DISCARD</p>
</li>
</ol>
<p>$QUARANTINEDIR = “/data/virusmails”;</p>
<ol>
<li><p>修改/etc/amavis/conf.d/05-node_id<br>$myhostname = “mail.example.com”;</p>
</li>
<li><p>修改/etc/amavis/conf.d/50-user,添加如下内容：<br>$spam_quarantine_to = “spam-quarantine”;<br>$virus_quarantine_to = “spam-quarantine”;</p>
</li>
</ol>
<p>@whitelist_sender_maps = read_hash(“/etc/amavis/whitelist”);<br>@blacklist_sender_maps = read_hash(“/etc/amavis/blacklist”);</p>
<ol>
<li><p>在目录/etc/amavis下创建文件blacklist和whitelist<br>touch /etc/amavis/whitelist<br>touch /etc/amavis/blacklist</p>
</li>
<li><p>垃圾及病毒邮件的保存目录<br>/data/virusmails</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/12/15/Postfix-Amavisd-new-Spamassassin-ClamAV整合安装/" data-id="ciwpxfwhh001h4zcyyh0d0yln" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Ubuntu-16-04-LTS-一键安装VNC" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/15/Ubuntu-16-04-LTS-一键安装VNC/" class="article-date">
  <time datetime="2016-12-15T05:14:59.000Z" itemprop="datePublished">2016-12-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/15/Ubuntu-16-04-LTS-一键安装VNC/">Ubuntu 16.04 LTS 一键安装VNC</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Ubuntu 16.04 LTS是最近出的LTS版本系统，估计未来也会有长期的使用频率，配置好远程桌面，会极大方便工作和生活。很多人也会采用SSH远程管理，鉴于SSH安装和使用是很简单的事情，就不赘述了。</p>
<p>VNC有很多选择，VNC4server，tigervncserver等等，都不推荐，难装又难用。经过多次实验和测试，最后只采用 x11vnc  作为VNC服务器端。</p>
<p>具体配置步骤如下：</p>
<h1 id="步骤-1-安装-X11VNC"><a href="#步骤-1-安装-X11VNC" class="headerlink" title="步骤 1 - 安装 X11VNC"></a>步骤 1 - 安装 X11VNC</h1><h1 id=""><a href="#" class="headerlink" title="#"></a>#</h1><p>sudo apt install x11vnc -y</p>
<h1 id="步骤-2-配置访问密码"><a href="#步骤-2-配置访问密码" class="headerlink" title="步骤 2 - 配置访问密码"></a>步骤 2 - 配置访问密码</h1><h1 id="-1"><a href="#-1" class="headerlink" title="#"></a>#</h1><p>sudo x11vnc -storepasswd /etc/x11vnc.pass </p>
<h1 id="步骤-3-创建服务"><a href="#步骤-3-创建服务" class="headerlink" title="步骤 3 - 创建服务"></a>步骤 3 - 创建服务</h1><h1 id="-2"><a href="#-2" class="headerlink" title="#"></a>#</h1><p>vi  /lib/systemd/system/x11vnc.service</p>
<p>#粘贴如下代码，最后 :wq 保存，请使用root用户，否则没有权限。<br>[Unit]<br>Description=Start x11vnc at startup.<br>After=multi-user.target<br>[Service]<br>Type=simple<br>ExecStart=/usr/bin/x11vnc -auth guess -forever -loop -noxdamage -repeat -rfbauth /etc/x11vnc.pass -rfbport 5900 -shared<br>[Install]<br>WantedBy=multi-user.target</p>
<h1 id="步骤-4-配置防火墙，配置和启动服务"><a href="#步骤-4-配置防火墙，配置和启动服务" class="headerlink" title="步骤 4 - 配置防火墙，配置和启动服务"></a>步骤 4 - 配置防火墙，配置和启动服务</h1><h1 id="-3"><a href="#-3" class="headerlink" title="#"></a>#</h1><p>sudo ufw allow 5900<br>sudo systemctl enable x11vnc.service<br>sudo systemctl daemon-reload</p>
<p>最后重启。</p>
<p>估计很多人看到这个会头大吧，还得输入代码呀。。。。</p>
<p>那好吧，我写个脚本，请拿去，运行完脚本会自动重启的。</p>
<p>su root</p>
<p>wget <a href="https://github.com/longhr/ubuntu1604hub/raw/master/ubuntu1604VNC.sh" target="_blank" rel="external">https://github.com/longhr/ubuntu1604hub/raw/master/ubuntu1604VNC.sh</a></p>
<p>root@jinyan:~# vim ubuntu1604VNC.sh</p>
<h1 id="-4"><a href="#-4" class="headerlink" title="#"></a>#</h1><h1 id="脚本名称-ubuntu1604VNC"><a href="#脚本名称-ubuntu1604VNC" class="headerlink" title="脚本名称 : ubuntu1604VNC"></a>脚本名称 : ubuntu1604VNC</h1><h1 id="脚本描述-自动安装配置和自动启动X11Vnc"><a href="#脚本描述-自动安装配置和自动启动X11Vnc" class="headerlink" title="脚本描述 : 自动安装配置和自动启动X11Vnc"></a>脚本描述 : 自动安装配置和自动启动X11Vnc</h1><h1 id="编写日期-2016-6-13"><a href="#编写日期-2016-6-13" class="headerlink" title="编写日期 : 2016.6.13"></a>编写日期 : 2016.6.13</h1><h1 id="作-者-longhr"><a href="#作-者-longhr" class="headerlink" title="作    者 : longhr"></a>作    者 : longhr</h1><h1 id="作者网站-blog-csdn-net-longhr"><a href="#作者网站-blog-csdn-net-longhr" class="headerlink" title="作者网站 : blog.csdn.net/longhr"></a>作者网站 : blog.csdn.net/longhr</h1><h1 id="软件版本-0-1"><a href="#软件版本-0-1" class="headerlink" title="软件版本 : 0.1"></a>软件版本 : 0.1</h1><h1 id="注意事项：-运行完5秒内会重启"><a href="#注意事项：-运行完5秒内会重启" class="headerlink" title="注意事项： 运行完5秒内会重启"></a>注意事项： 运行完5秒内会重启</h1><h1 id="免责声明-使用自由，后果自付"><a href="#免责声明-使用自由，后果自付" class="headerlink" title="免责声明 : 使用自由，后果自付"></a>免责声明 : 使用自由，后果自付</h1><h1 id="-5"><a href="#-5" class="headerlink" title="#"></a>#</h1><h1 id="步骤-1-安装-X11VNC-1"><a href="#步骤-1-安装-X11VNC-1" class="headerlink" title="步骤 1 - 安装 X11VNC"></a>步骤 1 - 安装 X11VNC</h1><h1 id="-6"><a href="#-6" class="headerlink" title="#"></a>#</h1><p>sudo apt-get install x11vnc -y</p>
<h1 id="步骤-2-配置访问密码-1"><a href="#步骤-2-配置访问密码-1" class="headerlink" title="步骤 2 - 配置访问密码"></a>步骤 2 - 配置访问密码</h1><h1 id="-7"><a href="#-7" class="headerlink" title="#"></a>#</h1><p>sudo x11vnc -storepasswd /etc/x11vnc.pass</p>
<h1 id="步骤-3-创建服务-1"><a href="#步骤-3-创建服务-1" class="headerlink" title="步骤 3 - 创建服务"></a>步骤 3 - 创建服务</h1><h1 id="-8"><a href="#-8" class="headerlink" title="#"></a>#</h1><p>cat &gt; /lib/systemd/system/x11vnc.service &lt;&lt; EOF<br>[Unit]<br>Description=Start x11vnc at startup.<br>After=multi-user.target</p>
<p>[Service]<br>Type=simple<br>ExecStart=/usr/bin/x11vnc -auth guess -forever -loop -noxdamage -repeat -rfbauth /etc/x11vnc.pass -rfbport 5900 -shared</p>
<p>[Install]<br>WantedBy=multi-user.target<br>EOF</p>
<h1 id="步骤-4-配配置防火墙端口，配置和启动服务"><a href="#步骤-4-配配置防火墙端口，配置和启动服务" class="headerlink" title="步骤 4 - 配配置防火墙端口，配置和启动服务"></a>步骤 4 - 配配置防火墙端口，配置和启动服务</h1><h1 id="-9"><a href="#-9" class="headerlink" title="#"></a>#</h1><p>echo “Configure firewall”<br>sudo ufw allow 5900<br>echo “Configure Services”<br>sudo systemctl enable x11vnc.service<br>sudo systemctl daemon-reload</p>
<h1 id="步骤-5-重启"><a href="#步骤-5-重启" class="headerlink" title="步骤 5 - 重启"></a>步骤 5 - 重启</h1><h1 id="-10"><a href="#-10" class="headerlink" title="#"></a>#</h1><p>sleep  5s<br>sudo shutdown -r now</p>
<p>root@jinyan:~#<br>chmod u+x ubuntu1604VNC.sh</p>
<p>./ubuntu1604VNC.sh</p>
<p>即可完成。</p>
<p>注意：</p>
<p>/lib/systemd/system/x11vnc.service 必须用root权限才能写入</p>
<p>如果root密码不知道，可以重置root密码</p>
<p>sudo passwd root</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/12/15/Ubuntu-16-04-LTS-一键安装VNC/" data-id="ciwpxfwhp001q4zcywa8ngmq3" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-计算机存储单位" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/15/计算机存储单位/" class="article-date">
  <time datetime="2016-12-15T05:13:51.000Z" itemprop="datePublished">2016-12-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/15/计算机存储单位/">计算机存储单位</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>计算机的记忆/存储单位换算<br>1Byte=8bit<br>1KB=1024B<br>1MB=1024KB<br>1GB=1024MB<br>1TB=1024GB<br>计算机存储单位一般用B，KB，MB，GB，TB，PB，EB，ZB，YB，BB来表示，<br>换算关系<br>　　位 bit (比特)(Binary Digits)：存放一位二进制数，即 0 或 1，最小的存储单位。<br>　　字节 byte：8个二进制位为一个字节(B)，最常用的单位。<br>　　1KB (Kilobyte 千字节)=1024B，<br>　　1MB (Megabyte 兆字节 简称“兆”)=1024KB，<br>　　1GB (Gigabyte 吉字节 又称“千兆”)=1024MB，<br>　　1TB(Trillionbyte 万亿字节 太字节)=1024GB，其中1024=2^10 ( 2 的10次方)，<br>　　1PB（Petabyte 千万亿字节 拍字节）=1024TB，<br>　　1EB（Exabyte 百亿亿字节 艾字节）=1024PB，<br>　　1ZB (Zettabyte 十万亿亿字节 泽字节)= 1024 EB,<br>　　1YB (Yottabyte 一亿亿亿字节 尧字节)= 1024 ZB,<br>　　1BB (Brontobyte 一千亿亿亿字节)= 1024 YB.<br>　　注：“兆”为百万级数量单位。<br>　　附：进制单位全称及译音<br>　　yotta, [尧]它, Y. 10^21,<br>　　zetta, [泽]它, Z. 10^18,<br>　　exa, [艾]可萨, E. 10^15,<br>　　peta, [拍]它, P. 10^12,<br>　　tera, [太]拉, T. 10^9,<br>　　giga, [级]咖, G. 10^6,<br>　　mega, [兆]，M. 10^3</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/12/15/计算机存储单位/" data-id="ciwpxfwjp00414zcyftj7vkns" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-FTP" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/12/15/FTP/" class="article-date">
  <time datetime="2016-12-15T03:41:38.000Z" itemprop="datePublished">2016-12-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/15/FTP/">FTP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>vsftpd.conf</p>
<h1 id="Example-config-file-etc-vsftpd-vsftpd-conf"><a href="#Example-config-file-etc-vsftpd-vsftpd-conf" class="headerlink" title="Example config file /etc/vsftpd/vsftpd.conf"></a>Example config file /etc/vsftpd/vsftpd.conf</h1><p>#</p>
<h1 id="The-default-compiled-in-settings-are-fairly-paranoid-This-sample-file"><a href="#The-default-compiled-in-settings-are-fairly-paranoid-This-sample-file" class="headerlink" title="The default compiled in settings are fairly paranoid. This sample file"></a>The default compiled in settings are fairly paranoid. This sample file</h1><h1 id="loosens-things-up-a-bit-to-make-the-ftp-daemon-more-usable"><a href="#loosens-things-up-a-bit-to-make-the-ftp-daemon-more-usable" class="headerlink" title="loosens things up a bit, to make the ftp daemon more usable."></a>loosens things up a bit, to make the ftp daemon more usable.</h1><h1 id="Please-see-vsftpd-conf-5-for-all-compiled-in-defaults"><a href="#Please-see-vsftpd-conf-5-for-all-compiled-in-defaults" class="headerlink" title="Please see vsftpd.conf.5 for all compiled in defaults."></a>Please see vsftpd.conf.5 for all compiled in defaults.</h1><p>#</p>
<h1 id="READ-THIS-This-example-file-is-NOT-an-exhaustive-list-of-vsftpd-options"><a href="#READ-THIS-This-example-file-is-NOT-an-exhaustive-list-of-vsftpd-options" class="headerlink" title="READ THIS: This example file is NOT an exhaustive list of vsftpd options."></a>READ THIS: This example file is NOT an exhaustive list of vsftpd options.</h1><h1 id="Please-read-the-vsftpd-conf-5-manual-page-to-get-a-full-idea-of-vsftpd’s"><a href="#Please-read-the-vsftpd-conf-5-manual-page-to-get-a-full-idea-of-vsftpd’s" class="headerlink" title="Please read the vsftpd.conf.5 manual page to get a full idea of vsftpd’s"></a>Please read the vsftpd.conf.5 manual page to get a full idea of vsftpd’s</h1><h1 id="capabilities"><a href="#capabilities" class="headerlink" title="capabilities."></a>capabilities.</h1><p>#</p>
<h1 id="Allow-anonymous-FTP-Beware-allowed-by-default-if-you-comment-this-out"><a href="#Allow-anonymous-FTP-Beware-allowed-by-default-if-you-comment-this-out" class="headerlink" title="Allow anonymous FTP? (Beware - allowed by default if you comment this out)."></a>Allow anonymous FTP? (Beware - allowed by default if you comment this out).</h1><p>anonymous_enable=YES<br>no_anon_password=YES<br>#</p>
<h1 id="Uncomment-this-to-allow-local-users-to-log-in"><a href="#Uncomment-this-to-allow-local-users-to-log-in" class="headerlink" title="Uncomment this to allow local users to log in."></a>Uncomment this to allow local users to log in.</h1><p>local_enable=YES<br>#</p>
<h1 id="Uncomment-this-to-enable-any-form-of-FTP-write-command"><a href="#Uncomment-this-to-enable-any-form-of-FTP-write-command" class="headerlink" title="Uncomment this to enable any form of FTP write command."></a>Uncomment this to enable any form of FTP write command.</h1><p>write_enable=YES<br>#</p>
<h1 id="Default-umask-for-local-users-is-077-You-may-wish-to-change-this-to-022"><a href="#Default-umask-for-local-users-is-077-You-may-wish-to-change-this-to-022" class="headerlink" title="Default umask for local users is 077. You may wish to change this to 022,"></a>Default umask for local users is 077. You may wish to change this to 022,</h1><h1 id="if-your-users-expect-that-022-is-used-by-most-other-ftpd’s"><a href="#if-your-users-expect-that-022-is-used-by-most-other-ftpd’s" class="headerlink" title="if your users expect that (022 is used by most other ftpd’s)"></a>if your users expect that (022 is used by most other ftpd’s)</h1><p>local_umask=022<br>#</p>
<h1 id="Uncomment-this-to-allow-the-anonymous-FTP-user-to-upload-files-This-only"><a href="#Uncomment-this-to-allow-the-anonymous-FTP-user-to-upload-files-This-only" class="headerlink" title="Uncomment this to allow the anonymous FTP user to upload files. This only"></a>Uncomment this to allow the anonymous FTP user to upload files. This only</h1><h1 id="has-an-effect-if-the-above-global-write-enable-is-activated-Also-you-will"><a href="#has-an-effect-if-the-above-global-write-enable-is-activated-Also-you-will" class="headerlink" title="has an effect if the above global write enable is activated. Also, you will"></a>has an effect if the above global write enable is activated. Also, you will</h1><h1 id="obviously-need-to-create-a-directory-writable-by-the-FTP-user"><a href="#obviously-need-to-create-a-directory-writable-by-the-FTP-user" class="headerlink" title="obviously need to create a directory writable by the FTP user."></a>obviously need to create a directory writable by the FTP user.</h1><p>anon_upload_enable=YES<br>#</p>
<h1 id="Uncomment-this-if-you-want-the-anonymous-FTP-user-to-be-able-to-create"><a href="#Uncomment-this-if-you-want-the-anonymous-FTP-user-to-be-able-to-create" class="headerlink" title="Uncomment this if you want the anonymous FTP user to be able to create"></a>Uncomment this if you want the anonymous FTP user to be able to create</h1><h1 id="new-directories"><a href="#new-directories" class="headerlink" title="new directories."></a>new directories.</h1><p>anon_mkdir_write_enable=YES<br>#</p>
<h1 id="Activate-directory-messages-messages-given-to-remote-users-when-they"><a href="#Activate-directory-messages-messages-given-to-remote-users-when-they" class="headerlink" title="Activate directory messages - messages given to remote users when they"></a>Activate directory messages - messages given to remote users when they</h1><h1 id="go-into-a-certain-directory"><a href="#go-into-a-certain-directory" class="headerlink" title="go into a certain directory."></a>go into a certain directory.</h1><p>dirmessage_enable=YES<br>#</p>
<h1 id="The-target-log-file-can-be-vsftpd-log-file-or-xferlog-file"><a href="#The-target-log-file-can-be-vsftpd-log-file-or-xferlog-file" class="headerlink" title="The target log file can be vsftpd_log_file or xferlog_file."></a>The target log file can be vsftpd_log_file or xferlog_file.</h1><h1 id="This-depends-on-setting-xferlog-std-format-parameter"><a href="#This-depends-on-setting-xferlog-std-format-parameter" class="headerlink" title="This depends on setting xferlog_std_format parameter"></a>This depends on setting xferlog_std_format parameter</h1><p>xferlog_enable=YES<br>#</p>
<h1 id="Make-sure-PORT-transfer-connections-originate-from-port-20-ftp-data"><a href="#Make-sure-PORT-transfer-connections-originate-from-port-20-ftp-data" class="headerlink" title="Make sure PORT transfer connections originate from port 20 (ftp-data)."></a>Make sure PORT transfer connections originate from port 20 (ftp-data).</h1><p>connect_from_port_20=YES<br>#</p>
<h1 id="If-you-want-you-can-arrange-for-uploaded-anonymous-files-to-be-owned-by"><a href="#If-you-want-you-can-arrange-for-uploaded-anonymous-files-to-be-owned-by" class="headerlink" title="If you want, you can arrange for uploaded anonymous files to be owned by"></a>If you want, you can arrange for uploaded anonymous files to be owned by</h1><h1 id="a-different-user-Note-Using-“root”-for-uploaded-files-is-not"><a href="#a-different-user-Note-Using-“root”-for-uploaded-files-is-not" class="headerlink" title="a different user. Note! Using “root” for uploaded files is not"></a>a different user. Note! Using “root” for uploaded files is not</h1><h1 id="recommended"><a href="#recommended" class="headerlink" title="recommended!"></a>recommended!</h1><p>chown_uploads=YES<br>chown_username=daemon</p>
<p>#chown_username=whoever<br>#</p>
<h1 id="The-name-of-log-file-when-xferlog-enable-YES-and-xferlog-std-format-YES"><a href="#The-name-of-log-file-when-xferlog-enable-YES-and-xferlog-std-format-YES" class="headerlink" title="The name of log file when xferlog_enable=YES and xferlog_std_format=YES"></a>The name of log file when xferlog_enable=YES and xferlog_std_format=YES</h1><h1 id="WARNING-changing-this-filename-affects-etc-logrotate-d-vsftpd-log"><a href="#WARNING-changing-this-filename-affects-etc-logrotate-d-vsftpd-log" class="headerlink" title="WARNING - changing this filename affects /etc/logrotate.d/vsftpd.log"></a>WARNING - changing this filename affects /etc/logrotate.d/vsftpd.log</h1><p>xferlog_file=/var/log/xferlog<br>#</p>
<h1 id="Switches-between-logging-into-vsftpd-log-file-and-xferlog-file-files"><a href="#Switches-between-logging-into-vsftpd-log-file-and-xferlog-file-files" class="headerlink" title="Switches between logging into vsftpd_log_file and xferlog_file files."></a>Switches between logging into vsftpd_log_file and xferlog_file files.</h1><h1 id="NO-writes-to-vsftpd-log-file-YES-to-xferlog-file"><a href="#NO-writes-to-vsftpd-log-file-YES-to-xferlog-file" class="headerlink" title="NO writes to vsftpd_log_file, YES to xferlog_file"></a>NO writes to vsftpd_log_file, YES to xferlog_file</h1><p>xferlog_std_format=YES<br>#</p>
<h1 id="You-may-change-the-default-value-for-timing-out-an-idle-session"><a href="#You-may-change-the-default-value-for-timing-out-an-idle-session" class="headerlink" title="You may change the default value for timing out an idle session."></a>You may change the default value for timing out an idle session.</h1><p>#idle_session_timeout=600<br>#</p>
<h1 id="You-may-change-the-default-value-for-timing-out-a-data-connection"><a href="#You-may-change-the-default-value-for-timing-out-a-data-connection" class="headerlink" title="You may change the default value for timing out a data connection."></a>You may change the default value for timing out a data connection.</h1><p>#data_connection_timeout=120<br>#</p>
<h1 id="It-is-recommended-that-you-define-on-your-system-a-unique-user-which-the"><a href="#It-is-recommended-that-you-define-on-your-system-a-unique-user-which-the" class="headerlink" title="It is recommended that you define on your system a unique user which the"></a>It is recommended that you define on your system a unique user which the</h1><h1 id="ftp-server-can-use-as-a-totally-isolated-and-unprivileged-user"><a href="#ftp-server-can-use-as-a-totally-isolated-and-unprivileged-user" class="headerlink" title="ftp server can use as a totally isolated and unprivileged user."></a>ftp server can use as a totally isolated and unprivileged user.</h1><p>#nopriv_user=ftpsecure<br>#</p>
<h1 id="Enable-this-and-the-server-will-recognise-asynchronous-ABOR-requests-Not"><a href="#Enable-this-and-the-server-will-recognise-asynchronous-ABOR-requests-Not" class="headerlink" title="Enable this and the server will recognise asynchronous ABOR requests. Not"></a>Enable this and the server will recognise asynchronous ABOR requests. Not</h1><h1 id="recommended-for-security-the-code-is-non-trivial-Not-enabling-it"><a href="#recommended-for-security-the-code-is-non-trivial-Not-enabling-it" class="headerlink" title="recommended for security (the code is non-trivial). Not enabling it,"></a>recommended for security (the code is non-trivial). Not enabling it,</h1><h1 id="however-may-confuse-older-FTP-clients"><a href="#however-may-confuse-older-FTP-clients" class="headerlink" title="however, may confuse older FTP clients."></a>however, may confuse older FTP clients.</h1><p>#async_abor_enable=YES<br>#</p>
<h1 id="By-default-the-server-will-pretend-to-allow-ASCII-mode-but-in-fact-ignore"><a href="#By-default-the-server-will-pretend-to-allow-ASCII-mode-but-in-fact-ignore" class="headerlink" title="By default the server will pretend to allow ASCII mode but in fact ignore"></a>By default the server will pretend to allow ASCII mode but in fact ignore</h1><h1 id="the-request-Turn-on-the-below-options-to-have-the-server-actually-do-ASCII"><a href="#the-request-Turn-on-the-below-options-to-have-the-server-actually-do-ASCII" class="headerlink" title="the request. Turn on the below options to have the server actually do ASCII"></a>the request. Turn on the below options to have the server actually do ASCII</h1><h1 id="mangling-on-files-when-in-ASCII-mode"><a href="#mangling-on-files-when-in-ASCII-mode" class="headerlink" title="mangling on files when in ASCII mode."></a>mangling on files when in ASCII mode.</h1><h1 id="Beware-that-on-some-FTP-servers-ASCII-support-allows-a-denial-of-service"><a href="#Beware-that-on-some-FTP-servers-ASCII-support-allows-a-denial-of-service" class="headerlink" title="Beware that on some FTP servers, ASCII support allows a denial of service"></a>Beware that on some FTP servers, ASCII support allows a denial of service</h1><h1 id="attack-DoS-via-the-command-“SIZE-big-file”-in-ASCII-mode-vsftpd"><a href="#attack-DoS-via-the-command-“SIZE-big-file”-in-ASCII-mode-vsftpd" class="headerlink" title="attack (DoS) via the command “SIZE /big/file” in ASCII mode. vsftpd"></a>attack (DoS) via the command “SIZE /big/file” in ASCII mode. vsftpd</h1><h1 id="predicted-this-attack-and-has-always-been-safe-reporting-the-size-of-the"><a href="#predicted-this-attack-and-has-always-been-safe-reporting-the-size-of-the" class="headerlink" title="predicted this attack and has always been safe, reporting the size of the"></a>predicted this attack and has always been safe, reporting the size of the</h1><h1 id="raw-file"><a href="#raw-file" class="headerlink" title="raw file."></a>raw file.</h1><h1 id="ASCII-mangling-is-a-horrible-feature-of-the-protocol"><a href="#ASCII-mangling-is-a-horrible-feature-of-the-protocol" class="headerlink" title="ASCII mangling is a horrible feature of the protocol."></a>ASCII mangling is a horrible feature of the protocol.</h1><p>#ascii_upload_enable=YES</p>
<p>#ascii_download_enable=YES<br>#</p>
<h1 id="You-may-fully-customise-the-login-banner-string"><a href="#You-may-fully-customise-the-login-banner-string" class="headerlink" title="You may fully customise the login banner string:"></a>You may fully customise the login banner string:</h1><p>#ftpd_banner=Welcome to blah FTP service.<br>#</p>
<h1 id="You-may-specify-a-file-of-disallowed-anonymous-e-mail-addresses-Apparently"><a href="#You-may-specify-a-file-of-disallowed-anonymous-e-mail-addresses-Apparently" class="headerlink" title="You may specify a file of disallowed anonymous e-mail addresses. Apparently"></a>You may specify a file of disallowed anonymous e-mail addresses. Apparently</h1><h1 id="useful-for-combatting-certain-DoS-attacks"><a href="#useful-for-combatting-certain-DoS-attacks" class="headerlink" title="useful for combatting certain DoS attacks."></a>useful for combatting certain DoS attacks.</h1><p>#deny_email_enable=YES</p>
<h1 id="default-follows"><a href="#default-follows" class="headerlink" title="(default follows)"></a>(default follows)</h1><p>#banned_email_file=/etc/vsftpd/banned_emails<br>#</p>
<h1 id="You-may-specify-an-explicit-list-of-local-users-to-chroot-to-their-home"><a href="#You-may-specify-an-explicit-list-of-local-users-to-chroot-to-their-home" class="headerlink" title="You may specify an explicit list of local users to chroot() to their home"></a>You may specify an explicit list of local users to chroot() to their home</h1><h1 id="directory-If-chroot-local-user-is-YES-then-this-list-becomes-a-list-of"><a href="#directory-If-chroot-local-user-is-YES-then-this-list-becomes-a-list-of" class="headerlink" title="directory. If chroot_local_user is YES, then this list becomes a list of"></a>directory. If chroot_local_user is YES, then this list becomes a list of</h1><h1 id="users-to-NOT-chroot"><a href="#users-to-NOT-chroot" class="headerlink" title="users to NOT chroot()."></a>users to NOT chroot().</h1><p>chroot_local_user=YES<br>chroot_list_enable=YES</p>
<h1 id="default-follows-1"><a href="#default-follows-1" class="headerlink" title="(default follows)"></a>(default follows)</h1><p>chroot_list_file=/etc/vsftpd/chroot_list<br>#</p>
<h1 id="You-may-activate-the-“-R”-option-to-the-builtin-ls-This-is-disabled-by"><a href="#You-may-activate-the-“-R”-option-to-the-builtin-ls-This-is-disabled-by" class="headerlink" title="You may activate the “-R” option to the builtin ls. This is disabled by"></a>You may activate the “-R” option to the builtin ls. This is disabled by</h1><h1 id="default-to-avoid-remote-users-being-able-to-cause-excessive-I-O-on-large"><a href="#default-to-avoid-remote-users-being-able-to-cause-excessive-I-O-on-large" class="headerlink" title="default to avoid remote users being able to cause excessive I/O on large"></a>default to avoid remote users being able to cause excessive I/O on large</h1><h1 id="sites-However-some-broken-FTP-clients-such-as-“ncftp”-and-“mirror”-assume"><a href="#sites-However-some-broken-FTP-clients-such-as-“ncftp”-and-“mirror”-assume" class="headerlink" title="sites. However, some broken FTP clients such as “ncftp” and “mirror” assume"></a>sites. However, some broken FTP clients such as “ncftp” and “mirror” assume</h1><h1 id="the-presence-of-the-“-R”-option-so-there-is-a-strong-case-for-enabling-it"><a href="#the-presence-of-the-“-R”-option-so-there-is-a-strong-case-for-enabling-it" class="headerlink" title="the presence of the “-R” option, so there is a strong case for enabling it."></a>the presence of the “-R” option, so there is a strong case for enabling it.</h1><p>#ls_recurse_enable=YES<br>#</p>
<h1 id="When-“listen”-directive-is-enabled-vsftpd-runs-in-standalone-mode-and"><a href="#When-“listen”-directive-is-enabled-vsftpd-runs-in-standalone-mode-and" class="headerlink" title="When “listen” directive is enabled, vsftpd runs in standalone mode and"></a>When “listen” directive is enabled, vsftpd runs in standalone mode and</h1><h1 id="listens-on-IPv4-sockets-This-directive-cannot-be-used-in-conjunction"><a href="#listens-on-IPv4-sockets-This-directive-cannot-be-used-in-conjunction" class="headerlink" title="listens on IPv4 sockets. This directive cannot be used in conjunction"></a>listens on IPv4 sockets. This directive cannot be used in conjunction</h1><h1 id="with-the-listen-ipv6-directive"><a href="#with-the-listen-ipv6-directive" class="headerlink" title="with the listen_ipv6 directive."></a>with the listen_ipv6 directive.</h1><p>listen=YES<br>#</p>
<h1 id="This-directive-enables-listening-on-IPv6-sockets-To-listen-on-IPv4-and-IPv6"><a href="#This-directive-enables-listening-on-IPv6-sockets-To-listen-on-IPv4-and-IPv6" class="headerlink" title="This directive enables listening on IPv6 sockets. To listen on IPv4 and IPv6"></a>This directive enables listening on IPv6 sockets. To listen on IPv4 and IPv6</h1><h1 id="sockets-you-must-run-two-copies-of-vsftpd-with-two-configuration-files"><a href="#sockets-you-must-run-two-copies-of-vsftpd-with-two-configuration-files" class="headerlink" title="sockets, you must run two copies of vsftpd with two configuration files."></a>sockets, you must run two copies of vsftpd with two configuration files.</h1><h1 id="Make-sure-that-one-of-the-listen-options-is-commented"><a href="#Make-sure-that-one-of-the-listen-options-is-commented" class="headerlink" title="Make sure, that one of the listen options is commented !!"></a>Make sure, that one of the listen options is commented !!</h1><p>#listen_ipv6=YES</p>
<p>pam_service_name=vsftpd<br>userlist_enable=YES<br>userlist_deny=YES<br>userlist_file=/etc/vsftpd/user_list<br>tcp_wrappers=YES<br>use_localtime=YES<br>banner_file=/etc/vsftpd/welcome.txt</p>
<p>pasv_min_port=65400<br>pasv_max_port=65410</p>
<p>ssl_enable=YES<br>allow_anon_ssl=NO<br>force_local_data_ssl=YES<br>force_local_logins_ssl=YES<br>ssl_tlsv1=YES<br>ssl_sslv2=NO<br>ssl_sslv3=NO<br>rsa_cert_file=/etc/vsftpd/vsftpd.pem</p>
<p>backup.sh</p>
<p>#!/bin/bash<br>backdir=”/etc /home /root /var/spool/mail”<br>basedir=/backup<br>[ ! -d “$basedir” ] &amp;&amp; mkdir $basedir<br>backfile=$basedir/backup.tar.gz<br>tar -zcvf $backfile $backdir</p>
<p>useradd.sh</p>
<p>#!/bin/bash<br>groupadd jinyangroup<br>for username in jinyan renjia sanyuan yuanmu renyuan<br>do<br>  useradd -G jinyangroup $username<br>  echo “yanjin” | passwd –stdin $username<br>done</p>
<p>chroot_list<br>jinyan<br>renjia<br>root</p>
<p>ftpusers</p>
<h1 id="Users-that-are-not-allowed-to-login-via-ftp"><a href="#Users-that-are-not-allowed-to-login-via-ftp" class="headerlink" title="Users that are not allowed to login via ftp"></a>Users that are not allowed to login via ftp</h1><h1 id="root"><a href="#root" class="headerlink" title="root"></a>root</h1><p>bin<br>daemon<br>adm<br>lp<br>sync<br>shutdown<br>halt<br>mail<br>news<br>uucp<br>operator<br>games<br>nobody</p>
<p>user_list</p>
<h1 id="vsftpd-userlist"><a href="#vsftpd-userlist" class="headerlink" title="vsftpd userlist"></a>vsftpd userlist</h1><h1 id="If-userlist-deny-NO-only-allow-users-in-this-file"><a href="#If-userlist-deny-NO-only-allow-users-in-this-file" class="headerlink" title="If userlist_deny=NO, only allow users in this file"></a>If userlist_deny=NO, only allow users in this file</h1><h1 id="If-userlist-deny-YES-default-never-allow-users-in-this-file-and"><a href="#If-userlist-deny-YES-default-never-allow-users-in-this-file-and" class="headerlink" title="If userlist_deny=YES (default), never allow users in this file, and"></a>If userlist_deny=YES (default), never allow users in this file, and</h1><h1 id="do-not-even-prompt-for-a-password"><a href="#do-not-even-prompt-for-a-password" class="headerlink" title="do not even prompt for a password."></a>do not even prompt for a password.</h1><h1 id="Note-that-the-default-vsftpd-pam-config-also-checks-etc-vsftpd-ftpusers"><a href="#Note-that-the-default-vsftpd-pam-config-also-checks-etc-vsftpd-ftpusers" class="headerlink" title="Note that the default vsftpd pam config also checks /etc/vsftpd/ftpusers"></a>Note that the default vsftpd pam config also checks /etc/vsftpd/ftpusers</h1><h1 id="for-users-that-are-denied"><a href="#for-users-that-are-denied" class="headerlink" title="for users that are denied."></a>for users that are denied.</h1><h1 id="root-1"><a href="#root-1" class="headerlink" title="root"></a>root</h1><p>bin<br>daemon<br>adm<br>lp<br>sync<br>shutdown<br>halt<br>mail<br>news<br>uucp<br>operator<br>games<br>nobody</p>
<p>[root@jinyan ~]# yum -y install vsftpd</p>
<p>[root@jinyan ~]# cat /etc/pam.d/vsftpd<br>auth       required     pam_listfile.so item=user sense=deny file=/etc/vsftpd/ftpusers onerr=succeed</p>
<p>[root@jinyan ~]# cat /etc/vsftpd/ftpusers</p>
<p>[root@jinyan ~]# /etc/init.d/vsftpd start<br>为 vsftpd 启动 vsftpd：[确定]<br>[root@jinyan ~]# netstat -tulnp| grep 21<br>tcp        0      0 0.0.0.0:21                  0.0.0.0:*                   LISTEN      1830/vsftpd</p>
<p>[root@jinyan ~]# vim /etc/vsftpd/vsftpd.conf</p>
<h1 id="listen-YES"><a href="#listen-YES" class="headerlink" title="listen=YES"></a>listen=YES</h1><p>listen=NO</p>
<p>[root@jinyan ~]# yum -y install xinetd<br>[root@jinyan ~]# vim /etc/xinetd.d/vsftpd<br>service ftp<br>{<br>        socket_type             = stream<br>        wait                    = no<br>        user                    = root<br>        server                  = /usr/sbin/vsftpd<br>        log_on_success          += DURATION USERID<br>        log_on_failure          += USERID<br>        nice                    = 10<br>        disable                 = no<br>}</p>
<p>[root@jinyan ~]# /etc/init.d/vsftpd stop<br>关闭 vsftpd：[确定]<br>[root@jinyan ~]# /etc/init.d/xinetd restart<br>[root@jinyan ~]# netstat -tulnp| grep 21<br>tcp        0      0 :::21                       :::*                        LISTEN      2389/xinetd</p>
<p>[root@jinyan ~]# vim /etc/vsftpd/vsftpd.conf<br>listen=YES</p>
<p>[root@jinyan ~]# /etc/init.d/xinetd stop</p>
<p>[root@jinyan ~]# /etc/init.d/vsftpd start</p>
<p>[root@jinyan ~]# /etc/init.d/xinetd restart</p>
<p>[root@jinyan ~]# /etc/init.d/vsftpd restart</p>
<p>[root@jinyan ~]# netstat -tulnp| grep “:21”</p>
<p>tcp        0      0 0.0.0.0:21                  0.0.0.0:*                   LISTEN      2483/vsftpd</p>
<p>[root@jinyan ~]# vim /etc/vsftpd/vsftpd.conf<br>anonymous_enable=YES<br>local_enable=YES<br>write_enable=YES<br>local_umask=022<br>dirmessage_enable=YES<br>xferlog_enable=YES<br>connect_from_port_20=YES<br>xferlog_std_format=YES<br>listen=YES<br>pam_service_name=vsftpd<br>userlist_enable=YES<br>tcp_wrappers=YES</p>
<p>use_localtime=YES</p>
<p>[root@jinyan ~]# /etc/init.d/vsftpd restart<br>[root@jinyan ~]# chkconfig vsftpd on</p>
<p>[root@jinyan ~]# vim /etc/vsftpd/vsftpd.conf<br>anonymous_enable=NO<br>local_enable=YES<br>write_enable=YES<br>local_umask=002<br>userlist_enable=YES<br>userlist_deny=YES<br>userlist_file=/etc/vsftpd/user_list<br>use_localtime=YES</p>
<p>dirmessage_enable=YES<br>xferlog_enable=YES<br>connect_from_port_20=YES<br>xferlog_std_format=YES<br>listen=YES<br>pam_service_name=vsftpd<br>tcp_wrappers=YES<br>banner_file=/etc/vsftpd/welcome.txt</p>
<p>[root@jinyan ~]# /etc/init.d/vsftpd restart</p>
<p>[root@jinyan ~]# vim /etc/vsftpd/welcome.txt<br>欢迎光临本小站，本站提供 FTP 的相关服务！<br>主要的服务是针对本机实体用户提供的，<br>若有任何问题，请与仁佳联络！</p>
<p>[root@jinyan ~]# vim /etc/vsftpd/user_list<br>root<br>bin</p>
<p>[root@jinyan ~]# yum  -y install ftp<br>[root@jinyan ~]# ftp localhost</p>
<p>[root@jinyan ~]# getsebool -a | grep ftp<br>allow_ftpd_anon_write –&gt; off<br>allow_ftpd_full_access –&gt; off<br>allow_ftpd_use_cifs –&gt; off<br>allow_ftpd_use_nfs –&gt; off<br>ftp_home_dir –&gt; off<br>ftpd_connect_db –&gt; off<br>httpd_enable_ftp_server –&gt; off<br>tftp_anon_write –&gt; off</p>
<p>[root@jinyan ~]# setsebool -P ftp_home_dir=1</p>
<p>[root@jinyan ~]# vim /etc/vsftpd/vsftpd.conf<br>chroot_local_user=YES<br>chroot_list_enable=YES<br>chroot_list_file=/etc/vsftpd/chroot_list</p>
<p>[root@jinyan ~]# vim /etc/vsftpd/chroot_list</p>
<p>jinyan<br>renjia</p>
<p>[root@jinyan ~]# /etc/init.d/vsftpd restart</p>
<p>[root@jinyan ~]# vim /etc/vsftpd/vsftpd.conf<br>local_max_rate=1000000  &lt;==记住喔，单位是 bytes/second</p>
<p>[root@jinyan ~]# /etc/init.d/vsftpd restart</p>
<p>[root@jinyan ~]# vim /etc/vsftpd/vsftpd.conf<br>max_clients=10<br>max_per_ip=1<br>[root@jinyan ~]# /etc/init.d/vsftpd restart</p>
<p>[root@jinyan ~]# vim /etc/vsftpd/vsftpd.conf<br>userlist_enable=YES<br>userlist_deny=NO<br>userlist_file=/etc/vsftpd/user_list<br>[root@jinyan ~]# /etc/init.d/vsftpd restart</p>
<p>由于系统账号无法使用 FTP 是因为 PAM 模块与 vsftpd 的内建功能所<br>致，亦即是 /etc/vsftpd/ftpusers 及 /etc/vsftpd/user_list 这两个档案<br>的影响。所以你只要进入这两个档案，并且将 root 那一行批注掉，那 root 就<br>可以使用 vsftpd这个 FTP 服务了。不过，不建议如此作喔！</p>
<p>[root@jinyan ~]# mkdir /var/ftp/linux<br>[root@jinyan ~]# mkdir /var/ftp/gnu</p>
<p>[root@jinyan ~]# vim /etc/vsftpd/vsftpd.conf<br>anonymous_enable=YES<br>no_anon_password=YES</p>
<p>anon_max_rate=1000000<br>data_connection_timeout=60<br>idle_session_timeout=600<br>max_clients=50<br>max_per_ip=5<br>local_enable=NO</p>
<p>use_localtime=YES<br>dirmessage_enable=YES<br>xferlog_enable=YES<br>connect_from_port_20=YES<br>xferlog_std_format=YES<br>listen=YES<br>pam_service_name=vsftpd<br>tcp_wrappers=YES</p>
<p>banner_file=/etc/vsftpd/anon_welcome.txt</p>
<p>[root@jinyan ~]# /etc/init.d/vsftpd restart</p>
<p>[root@jinyan ~]# vim /etc/vsftpd/anon_welcome.txt<br>欢迎光临本站所提供的 FTP 服务！<br>本站主要提供 Linux 操作系统相关档案以及 GNU 自由软件喔！<br>有问题请与站长联络！谢谢大家！<br>主要的目录为：<br>linux   提供 Linux 操作系统相关软件<br>gnu     提供 GNU 的自由软件<br>uploads 提供匿名的您上传数据</p>
<p>[root@jinyan ~]# ftp localhost<br>Name (localhost:root): anonymous</p>
<p>[root@jinyan ~]# vim /etc/vsftpd/vsftpd.conf<br>write_enable=YES<br>anon_other_write_enable=YES<br>anon_mkdir_write_enable=YES<br>anon_upload_enable=YES</p>
<p>[root@jinyan ~]# /etc/init.d/vsftpd restart</p>
<p>[root@jinyan ~]# mkdir /var/ftp/uploads<br>[root@jinyan ~]# chown ftp /var/ftp/uploads<br>[root@jinyan ~]# setsebool -P allow_ftpd_anon_write=1<br>[root@jinyan ~]# setsebool -P allow_ftpd_full_access=1</p>
<p>[root@jinyan ~]# vim /etc/vsftpd/vsftpd.conf<br>write_enable=YES<br>anon_mkdir_write_enable=YES<br>anon_upload_enable=YES<br>chown_uploads=YES<br>chown_username=daemon</p>
<p>[root@jinyan ~]# /etc/init.d/vsftpd restart</p>
<p>[root@jinyan ~]# vim /etc/vsftpd/vsftpd.conf<br>pasv_min_port=65400<br>pasv_max_port=65410</p>
<p>[root@jinyan ~]# /etc/init.d/vsftpd restart</p>
<p>[root@www ~]# vim /etc/sysconfig/iptables-config</p>
<p>IPTABLES_MODULES=”ip_nat_ftp ip_conntrack_ftp”</p>
<p>[root@www ~]# /etc/init.d/iptables restart</p>
<p>[root@www ~]# vim /usr/local/virus/iptables/iptables.rule<br>iptables -A INPUT -p TCP -i $EXTIF –dport  21  –sport 1024:65534 -j ACCEPT<br>iptables -A INPUT -p TCP -i $EXTIF –dport 65400:65410 –sport 1024:65534 -j ACCEPT</p>
<p>[root@jinyan ~]# vim /etc/vsftpd/vsftpd.conf<br>xferlog_enable=YES<br>xferlog_file=/var/log/xferlog<br>[root@jinyan ~]# /etc/init.d/vsftpd restart</p>
<p>ftp://192.168.0.99/<br>ftp://jinyan@192.168.0.99/<br>ftp://jinyan:yanjin@192.168.0.99/</p>
<p>[root@jinyan ~]# ldd $(which vsftpd) | grep ssl<br>        libssl.so.10 =&gt; /usr/lib64/libssl.so.10 (0x00007f59d2c3e000)<br>[root@jinyan ~]# cd /etc/pki/tls/certs<br>[root@jinyan certs]# make vsftpd.pem<br>Country Name (2 letter code) [XX]:CN<br>State or Province Name (full name) []:Jiangsu<br>Locality Name (eg, city) [Default City]:Changzhou<br>Organization Name (eg, company) [Default Company Ltd]:sanyuamempire<br>Organizational Unit Name (eg, section) []:IT<br>Common Name (eg, your name or your server’s hostname) []:centos.jinyan<br>Email Address []:jinyan@centos.jinyan</p>
<p>[root@jinyan certs]# cp -a vsftpd.pem /etc/vsftpd/<br>[root@jinyan certs]# ll /etc/vsftpd/vsftpd.pem<br>-rw——-. 1 root root 3128 8月   9 10:25 /etc/vsftpd/vsftpd.pem</p>
<p>[root@jinyan ~]# vim /etc/vsftpd/vsftpd.conf<br>local_enable=YES<br>write_enable=YES<br>local_umask=002<br>chroot_local_user=YES<br>chroot_list_enable=YES<br>chroot_list_file=/etc/vsftpd/chroot_list<br>local_max_rate=10000000</p>
<p>anonymous_enable=YES<br>no_anon_password=YES<br>anon_max_rate=1000000<br>data_connection_timeout=60<br>idle_session_timeout=600</p>
<p>ssl_enable=YES<br>allow_anon_ssl=NO<br>force_local_data_ssl=YES<br>force_local_logins_ssl=YES<br>ssl_tlsv1=YES<br>ssl_sslv2=NO<br>ssl_sslv3=NO<br>rsa_cert_file=/etc/vsftpd/vsftpd.pem</p>
<p>max_clients=50<br>max_per_ip=5<br>use_localtime=YES<br>dirmessage_enable=YES<br>xferlog_enable=YES<br>connect_from_port_20=YES<br>xferlog_std_format=YES<br>listen=YES<br>pam_service_name=vsftpd<br>tcp_wrappers=YES<br>banner_file=/etc/vsftpd/welcome.txt<br>dual_log_enable=YES<br>vsftpd_log_file=/var/log/vsftpd.log<br>pasv_min_port=65400<br>pasv_max_port=65410</p>
<p>[root@jinyan ~]# /etc/init.d/vsftpd restart</p>
<p>欢迎光临本小站，本站提供 FTP 的相关服务！<br>主要的服务是针对本机实体用户提供的，<br>若有任何问题，请与仁佳联络！</p>
<p>欢迎光临本站所提供的 FTP 服务！<br>本站主要提供 Linux 操作系统相关档案以及 GNU 自由软件喔！<br>有问题请与站长联络！谢谢大家！<br>主要的目录为：<br>linux   提供 Linux 操作系统相关软件<br>gnu     提供 GNU 的自由软件<br>uploads 提供匿名的您上传数据</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/12/15/FTP/" data-id="ciwpxfwh200134zcyc7180n0w" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/2/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/12/15/ubuntu-12-04网络设置/">ubuntu 12.04网络设置</a>
          </li>
        
          <li>
            <a href="/2016/12/15/Ubuntu-用vsftpd-配置FTP服务器/">Ubuntu 用vsftpd 配置FTP服务器</a>
          </li>
        
          <li>
            <a href="/2016/12/15/ubuntu下允许root用户ssh远程登录/">ubuntu下允许root用户ssh远程登录</a>
          </li>
        
          <li>
            <a href="/2016/12/15/ubuntu用root登录后没法使用chromium/">ubuntu用root登录后没法使用chromium</a>
          </li>
        
          <li>
            <a href="/2016/12/15/vsftpd安装以及配置FTP虚拟用户实践/">vsftpd安装以及配置FTP虚拟用户实践</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 JinYan<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>